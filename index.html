<!DOCTYPE html>
<html>
    <head>
        <title>work</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

        <style type="text/css">
            #imgs_group{
                margin:10px;
            }
        </style>
    </head>
    <body>
        <div class="container-fluid">

            <div class="row">
                <div class="col-md-16">
                    <center>
                        <h3>
                            林晓栩要的东西
                        </h3>
                    </center>
                </div>
            </div>

            <div class="row" id="search_form">
                <div class="col-md-3">
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="what do you want" id="search_terms" >
                </div>
                <div class="col-md-3">
                    <button type="button" value="search" class="btn btn-primary col-md-4" onclick="seek_pic()">search</button>
                </div>
            </div>

            <div class="row" id="imgs_group">
            </div>

        </div>

        <script type="text/javascript">
            document.onkeydown = function (e) { // 回车提交表单
            // 兼容FF和IE和Opera
                var theEvent = window.event || e;
                var code = theEvent.keyCode || theEvent.which || theEvent.charCode;
                if (code == 13) {
                    seek_pic();
                }
            }

            // ajax request pics from server
            function seek_pic(){
                $("#imgs_group").empty() //clear last pics group
                $.ajax({
                    type: "GET",
                    url: "http://127.0.0.1:8080/?search_terms=" + String($("#search_terms").val()),
                    dataType: "json",
                    // jsonp: "callback",
                    // jsonpCallback: "callback",//回调方法，与服务器配合
                    success: function(data){
                        urls = data['urls'];
                        for(j = 1, len=urls.length+1; j < len; j++) {
                            // generate thumbNail Image
                            $("#imgs_group").append("\
                                    <div class='col-xs-6 col-md-2'><a href='" + String(urls[j]) + "' class='thumbnail'><img style='width: 175px; height: 155px;' src='" + String(urls[j]) + "' class='img-responsive'></a></div>\
                                ");
                        }
                    },
                    error: function() {
                        alert('失败');
                    }
                });
            }
        </script>

    </body>
</html>
